#!/bin/bash

[ -n "$DOTFILES_LOG" ] && return || export DOTFILES_LOG=true

[ ! -d "$DOTFILES_HOME/logs" ] && mkdir "$DOTFILES_HOME/logs"
readonly LOG_FILE="$DOTFILES_HOME/logs/$(basename "$0")"

_log() {
    echo "[$(date +'%Y-%m-%d %T.%N')] $1: $2" | tee -a "$LOG_FILE" >&2 ;
}

info ()    { _log "INFO"    "$*"; }
warning () { _log "WARNING" "$*"; }
error ()   { _log "ERROR"   "$*"; }
fatal ()   { _log "FATAL"   "$*"; exit 1; }