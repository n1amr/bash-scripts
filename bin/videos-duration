#!/bin/bash

set -e

DELIM=';.;.;'
[ "$#" -ne 0 ] || exit

exiftool -n -q -p '${Duration; $_=ConvertDuration($_)}'"$DELIM"'${Duration;our $sum;$_=ConvertDuration($sum+=$_)}'"$DELIM"'${FileName}' "$@" 2> /dev/null |
    awk -F "$DELIM" '{sum=$2;$2=""; print $0} END{printf "===============\n%s  Total\n", sum}'
